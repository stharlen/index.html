<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A√ß√£o Premiada 3.0</title>

<style>
body{
margin:0;
font-family:Arial;
background:#000;
color:#fff;
}

header{
background:linear-gradient(90deg,#000,#222,#000);
padding:20px;
text-align:center;
border-bottom:2px solid gold;
}

header h1{
color:gold;
letter-spacing:3px;
}

.numbers{
display:grid;
grid-template-columns:repeat(10,1fr);
gap:5px;
max-width:500px;
margin:20px auto;
}

.number{
background:#fff;
color:#000;
padding:10px;
text-align:center;
border-radius:5px;
cursor:pointer;
}

.number.reserved{
background:#444;
color:#fff;
cursor:not-allowed;
}

.number.selected{
background:gold;
color:#000;
}

.form{
max-width:400px;
margin:20px auto;
background:#111;
padding:20px;
border:1px solid gold;
border-radius:10px;
}

input,button{
width:100%;
padding:10px;
margin-top:10px;
border:none;
border-radius:5px;
}

button{
background:gold;
font-weight:bold;
cursor:pointer;
}

.admin{
max-width:400px;
margin:20px auto;
background:#111;
padding:20px;
border:1px solid red;
border-radius:10px;
display:none;
}

footer{
text-align:center;
padding:20px;
background:#000;
border-top:1px solid gold;
margin-top:40px;
}
</style>
</head>

<body>

<header>
<h1>üçÄ A√á√ÉO PREMIADA üçÄ</h1>
<div id="contador"></div>
</header>

<div class="numbers" id="numbers"></div>

<div class="form">
<input type="text" id="name" placeholder="Nome completo">
<input type="text" id="whatsapp" placeholder="WhatsApp">
<button onclick="comprar()">Reservar N√∫meros</button>
<div id="resultado"></div>
</div>

<div class="admin" id="adminPanel">
<h3>Painel Admin</h3>
<input type="password" id="adminSenha" placeholder="Senha Admin">
<button onclick="acessarAdmin()">Entrar</button>
<button onclick="sortear()">Sortear N√∫mero</button>
<div id="listaCompradores"></div>
</div>

<footer>
¬© 2026 A√ß√£o Premiada 3.0 | Pix: stharlen1@gmail.com
</footer>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getDatabase, ref, onValue, set, push, get } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyCOBE5z9Y9Vegpmx3bjn5ZoF46X4pCrnCk",
  authDomain: "acao-premiada.firebaseapp.com",
  databaseURL: "https://acao-premiada-default-rtdb.firebaseio.com",
  projectId: "acao-premiada",
  storageBucket: "acao-premiada.firebasestorage.app",
  messagingSenderId: "1027063922704",
  appId: "1:1027063922704:web:a817f161b2c546e73f0a95"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

const numbersDiv = document.getElementById("numbers");
let selected = [];

for(let i=1;i<=100;i++){
let div=document.createElement("div");
div.className="number";
div.innerText=i.toString().padStart(2,'0');
div.onclick=()=>selecionar(div,i);
numbersDiv.appendChild(div);
}

function selecionar(el,num){
if(el.classList.contains("reserved")) return;
el.classList.toggle("selected");
if(selected.includes(num)){
selected=selected.filter(n=>n!==num);
}else{
selected.push(num);
}
}

function comprar(){
let nome=document.getElementById("name").value;
let whats=document.getElementById("whatsapp").value;

if(selected.length==0)return alert("Selecione n√∫meros");

selected.forEach(num=>{
set(ref(db,"numeros/"+num),{
nome:nome,
whatsapp:whats
});
});

selected=[];
alert("Reservado com sucesso!");
}

onValue(ref(db,"numeros"),snapshot=>{
let data=snapshot.val();
document.querySelectorAll(".number").forEach(n=>n.classList.remove("reserved"));

if(data){
Object.keys(data).forEach(num=>{
numbersDiv.children[num-1].classList.add("reserved");
});
document.getElementById("contador").innerText=
"Vendidos: "+Object.keys(data).length+"/100";
}
});

/* ADMIN */
window.acessarAdmin=function(){
let senha=document.getElementById("adminSenha").value;
if(senha==="1234"){
document.getElementById("listaCompradores").innerHTML="Acesso liberado";
get(ref(db,"numeros")).then(snapshot=>{
let dados=snapshot.val();
let lista="";
for(let n in dados){
lista+=`<p>${n} - ${dados[n].nome}</p>`;
}
document.getElementById("listaCompradores").innerHTML=lista;
});
}
};

window.sortear=function(){
get(ref(db,"numeros")).then(snapshot=>{
let dados=snapshot.val();
let nums=Object.keys(dados);
let sorteado=nums[Math.floor(Math.random()*nums.length)];
alert("N√∫mero sorteado: "+sorteado);
});
};

</script>

</body>
</html>
